<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Торговые стратегии на основе теории игр</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #121212;
            color: #e0e0e0;
            height: 100vh;
            overflow: hidden;
        }
        
        #container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        
        header {
            background-color: #1e1e1e;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }
        
        nav ul {
            display: flex;
            justify-content: center;
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        nav li {
            margin: 0 15px;
        }
        
        nav a {
            color: #9e9e9e;
            text-decoration: none;
            font-size: 16px;
            padding: 8px 15px;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        nav a:hover, nav a.active {
            color: #ffffff;
            background-color: #424242;
        }
        
        #content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        .strategy {
            display: none;
            flex: 1;
        }
        
        .strategy.active {
            display: block;
        }
        
        h1 {
            color: #ffffff;
            border-bottom: 1px solid #424242;
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        h2 {
            color: #bbbbbb;
            margin-top: 25px;
        }
        
        p {
            line-height: 1.6;
        }
        
        .example {
            background-color: #1e1e1e;
            padding: 15px;
            border-left: 3px solid #424242;
            margin: 15px 0;
        }
        
        .chart-container {
            width: 100%;
            height: 300px;
            background-color: #1e1e1e;
            margin: 20px 0;
            position: relative;
            border: 1px solid #424242;
        }
        
        .chart {
            width: 100%;
            height: 100%;
        }
        
        .scenario {
            margin-bottom: 30px;
        }
        
        .scenario-title {
            font-weight: bold;
            color: #9e9e9e;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div id="container">
        <header>
            <nav>
                <ul>
                    <li><a href="#" class="nav-link active" data-target="dilemma">Дилемма трейдера</a></li>
                    <li><a href="#" class="nav-link" data-target="attrition">Война на истощение</a></li>
                    <li><a href="#" class="nav-link" data-target="signaling">Сигнальные игры</a></li>
                    <li><a href="#" class="nav-link" data-target="market-making">Маркет-мейкинг</a></li>
                    <li><a href="#" class="nav-link" data-target="algorithmic">Алгоритмический трейдинг</a></li>
                    <li><a href="#" class="nav-link" data-target="liquidity">Охота за ликвидностью</a></li>
                </ul>
            </nav>
        </header>
        
        <div id="content">
            <!-- Дилемма трейдера -->
            <div class="strategy active" id="dilemma">
                <h1>Дилемма трейдера (аналог «Дилеммы заключённого»)</h1>
                
                <p><strong>Суть:</strong> Если все побегут покупать акцию — цена взлетит, и выгода исчезнет. Если все будут ждать — можно упустить тренд.</p>
                
                <h2>Как применяется:</h2>
                <p>Контртрендовая торговля: покупка, когда другие паникуют (стратегия «наперекор толпе»).</p>
                
                <div class="chart-container">
                    <canvas id="dilemmaChart" class="chart"></canvas>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Сценарий 1: Все покупают</div>
                    <p>Когда большинство трейдеров начинают покупать актив, цена резко растет, но затем быстро падает, так как ранние покупатели фиксируют прибыль.</p>
                    <div class="example">
                        <strong>Пример:</strong> В январе 2021 года многие инвесторы массово покупали акции GameStop, что привело к резкому росту цены. Однако позже цена упала, когда крупные игроки начали продавать.
                    </div>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Сценарий 2: Все ждут</div>
                    <p>Когда трейдеры ожидают лучшего момента для входа, цена может медленно расти без резких скачков, но многие упускают начало тренда.</p>
                    <div class="example">
                        <strong>Пример:</strong> Bitcoin в 2016 году: многие ждали "идеального момента" для входа, пока цена медленно росла с $400 до $1000.
                    </div>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Оптимальная стратегия</div>
                    <p>Контртрендовый подход: покупать, когда другие продают в панике, и продавать, когда все активно покупают.</p>
                    <div class="example">
                        <strong>Пример:</strong> Bitcoin резко падает, но вы покупаете, зная, что паника временна. Когда цена восстанавливается, вы фиксируете прибыль.
                    </div>
                </div>
            </div>
            
            <!-- Война на истощение -->
            <div class="strategy" id="attrition">
                <h1>Война на истощение (War of Attrition)</h1>
                
                <p><strong>Суть:</strong> Игроки держатся до последнего, надеясь, что соперник сдастся первым.</p>
                
                <h2>В трейдинге:</h2>
                <p>Удержание убыточной позиции, пока конкуренты не «выбросят» свои акции.</p>
                
                <div class="chart-container">
                    <canvas id="attritionChart" class="chart"></canvas>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Сценарий 1: Мелкие трейдеры сдаются первыми</div>
                    <p>Крупные игроки могут позволить себе держать убыточные позиции дольше, вынуждая мелких трейдеров закрывать позиции по невыгодным ценам.</p>
                    <div class="example">
                        <strong>Пример:</strong> Фонды держат акции убыточной компании, ожидая, что мелкие трейдеры сольются первыми. После этого цена может восстановиться.
                    </div>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Сценарий 2: Никто не сдается</div>
                    <p>Если ни одна из сторон не готова уступить, цена может долго оставаться в узком диапазоне, пока не произойдет существенное изменение фундаментальных факторов.</p>
                    <div class="example">
                        <strong>Пример:</strong> Торговая война между крупными маркет-мейкерами может привести к длительному периоду низкой волатильности.
                    </div>
                </div>
            </div>
            
            <!-- Сигнальные игры -->
            <div class="strategy" id="signaling">
                <h1>Сигнальные игры (Signaling Games)</h1>
                
                <p><strong>Суть:</strong> Один игрок отправляет «сигнал» (например, крупный ордер), а другие его интерпретируют.</p>
                
                <h2>В трейдинге:</h2>
                <p>Маркет-мейкеры намеренно оставляют крупные ордера в стакане, чтобы манипулировать ожиданиями.</p>
                
                <div class="chart-container">
                    <canvas id="signalingChart" class="chart"></canvas>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Сценарий 1: Ложный сигнал</div>
                    <p>Крупный ордер может быть выставлен для создания ложного впечатления о намерениях крупного игрока.</p>
                    <div class="example">
                        <strong>Пример:</strong> Большая заявка на покупку по $100 может быть выставлена, чтобы создать впечатление поддержки, но затем быстро снята перед реальным движением цены вниз.
                    </div>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Сценарий 2: Истинный сигнал</div>
                    <p>Иногда крупные ордера действительно отражают намерения крупных игроков и могут служить индикатором будущего движения цены.</p>
                    <div class="example">
                        <strong>Пример:</strong> Большая заявка на покупку по $100 — сигнал, что цена не упадёт ниже, если она остается в стакане длительное время и постепенно исполняется.
                    </div>
                </div>
            </div>
            
            <!-- Маркет-мейкинг -->
            <div class="strategy" id="market-making">
                <h1>Маркет-мейкинг (равновесие Нэша)</h1>
                
                <p><strong>Откуда взята:</strong> Из модели «игры на спреде»: маркет-мейкеры выставляют заявки так, чтобы ни один из них не мог увеличить прибыль в одиночку.</p>
                
                <div class="chart-container">
                    <canvas id="marketMakingChart" class="chart"></canvas>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Равновесие Нэша в спредах</div>
                    <p>Маркет-мейкеры поддерживают определенный уровень спреда, так как любое отклонение в пользу одного участника приведет к потерям для других.</p>
                    <div class="example">
                        <strong>Пример:</strong> Если все ММ выставляют спред 1%, никто не может сузить его до 0.9%, иначе проиграет из-за увеличенного риска.
                    </div>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Изменение равновесия</div>
                    <p>При появлении нового игрока с лучшими условиями равновесие может сместиться, заставляя всех участников адаптироваться.</p>
                    <div class="example">
                        <strong>Пример:</strong> Появление высокочастотных торговых алгоритмов изменило стандартные спреды на многих рынках.
                    </div>
                </div>
            </div>
            
            <!-- Алгоритмический трейдинг -->
            <div class="strategy" id="algorithmic">
                <h1>Алгоритмический трейдинг (байесовские игры)</h1>
                
                <p><strong>Откуда взята:</strong> Из теорий с неполной информацией: алгоритмы постоянно обновляют вероятности действий других участников.</p>
                
                <div class="chart-container">
                    <canvas id="algorithmicChart" class="chart"></canvas>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Адаптация к поведению рынка</div>
                    <p>Алгоритмы анализируют исторические данные и текущие действия участников рынка, чтобы предсказать их следующее действие.</p>
                    <div class="example">
                        <strong>Пример:</strong> HFT-алгоритм «учится», что после новостей в 15:00 толпа покупает — и начинает опережать их, покупая за миллисекунды до этого.
                    </div>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Игра с неполной информацией</div>
                    <p>Алгоритмы пытаются скрыть свои истинные намерения, одновременно пытаясь раскрыть намерения других участников.</p>
                    <div class="example">
                        <strong>Пример:</strong> Алгоритм может разбивать крупный ордер на множество мелких и исполнять их в случайные моменты времени, чтобы скрыть свои истинные объемы.
                    </div>
                </div>
            </div>
            
            <!-- Охота за ликвидностью -->
            <div class="strategy" id="liquidity">
                <h1>Охота за ликвидностью (аукционные теории)</h1>
                
                <p><strong>Откуда взята:</strong> Из аукционов Викри и Groves-Clarke: как выставлять ордера, чтобы минимизировать проскальзывание.</p>
                
                <div class="chart-container">
                    <canvas id="liquidityChart" class="chart"></canvas>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Минимизация проскальзывания</div>
                    <p>Крупные игроки используют специальные алгоритмы для исполнения ордеров с минимальным влиянием на цену.</p>
                    <div class="example">
                        <strong>Пример:</strong> Крупный игрок разбивает ордер на части, чтобы не «показать» свои намерения и не вызвать резкого движения цены.
                    </div>
                </div>
                
                <div class="scenario">
                    <div class="scenario-title">Обнаружение крупных ордеров</div>
                    <p>Другие участники рынка пытаются обнаружить крупные ордера по косвенным признакам, чтобы заранее позиционироваться.</p>
                    <div class="example">
                        <strong>Пример:</strong> Алгоритмы могут анализировать мелкие, но частые ордера в одном направлении как признак крупного игрока и начинать двигать цену в этом направлении.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Навигация
            const navLinks = document.querySelectorAll('.nav-link');
            const strategies = document.querySelectorAll('.strategy');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Удаляем активный класс у всех ссылок и стратегий
                    navLinks.forEach(l => l.classList.remove('active'));
                    strategies.forEach(s => s.classList.remove('active'));
                    
                    // Добавляем активный класс к текущей ссылке
                    this.classList.add('active');
                    
                    // Показываем соответствующую стратегию
                    const target = this.getAttribute('data-target');
                    document.getElementById(target).classList.add('active');
                    
                    // Перерисовываем графики при переключении
                    setTimeout(renderCharts, 100);
                });
            });
            
            // Функция для создания случайных данных для графиков
            function generateRandomData(length, start, volatility, trend) {
                const data = [start];
                for (let i = 1; i < length; i++) {
                    const change = (Math.random() - 0.5) * volatility + trend;
                    data.push(data[i-1] + change);
                }
                return data;
            }
            
            // Функция для рендеринга всех графиков
            function renderCharts() {
                // Дилемма трейдера
                renderChart(
                    'dilemmaChart',
                    ['Все покупают', 'Все ждут', 'Оптимальная стратегия'],
                    [
                        generateRandomData(20, 100, 15, 5),
                        generateRandomData(20, 100, 5, 2),
                        generateRandomData(20, 100, 10, -3).map((v, i) => i < 5 ? v - 20 : v + 15)
                    ],
                    ['#FF6384', '#36A2EB', '#4BC0C0']
                );
                
                // Война на истощение
                renderChart(
                    'attritionChart',
                    ['Цена актива', 'Позиции крупных игроков', 'Позиции мелких трейдеров'],
                    [
                        generateRandomData(20, 100, 10, -1),
                        generateRandomData(20, 80, 5, -0.5),
                        generateRandomData(20, 50, 8, -2)
                    ],
                    ['#FF9F40', '#9966FF', '#FFCD56']
                );
                
                // Сигнальные игры
                renderChart(
                    'signalingChart',
                    ['Цена', 'Крупные ордера на покупку', 'Крупные ордера на продажу'],
                    [
                        generateRandomData(20, 100, 8, 0),
                        generateRandomData(20, 0, 2, 0).map((v, i) => i === 5 ? 30 : i === 10 ? 40 : 0),
                        generateRandomData(20, 0, 2, 0).map((v, i) => i === 8 ? 25 : i === 15 ? 35 : 0)
                    ],
                    ['#4BC0C0', '#66FF66', '#FF6666']
                );
                
                // Маркет-мейкинг
                renderChart(
                    'marketMakingChart',
                    ['Спред', 'Объем покупок', 'Объем продаж'],
                    [
                        generateRandomData(20, 2, 0.3, 0),
                        generateRandomData(20, 100, 20, 0),
                        generateRandomData(20, 100, 20, 0)
                    ],
                    ['#9966FF', '#36A2EB', '#FF6384']
                );
                
                // Алгоритмический трейдинг
                renderChart(
                    'algorithmicChart',
                    ['Цена', 'Алгоритмические ордера', 'Ручные ордера'],
                    [
                        generateRandomData(30, 100, 5, 0.2),
                        generateRandomData(30, 0, 10, 0).map((v, i) => i % 3 === 0 ? 30 + Math.random() * 20 : 0),
                        generateRandomData(30, 0, 10, 0).map((v, i) => i === 10 ? 50 : i === 20 ? 40 : 0)
                    ],
                    ['#FFCE56', '#4BC0C0', '#FF9F40']
                );
                
                // Охота за ликвидностью
                renderChart(
                    'liquidityChart',
                    ['Цена', 'Видимые ордера', 'Скрытые ордера'],
                    [
                        generateRandomData(25, 100, 3, 0.1),
                        generateRandomData(25, 20, 5, 0),
                        generateRandomData(25, 0, 2, 0).map((v, i) => i % 4 === 0 ? 15 + Math.random() * 10 : 0)
                    ],
                    ['#36A2EB', '#FF6384', '#9966FF']
                );
            }
            
            // Функция для рендеринга одного графика
            function renderChart(canvasId, labels, datasets, colors) {
                const ctx = document.getElementById(canvasId).getContext('2d');
                
                // Удаляем предыдущий график, если он существует
                if (window[canvasId + 'Instance']) {
                    window[canvasId + 'Instance'].destroy();
                }
                
                const chartData = {
                    labels: Array.from({length: datasets[0].length}, (_, i) => i + 1),
                    datasets: datasets.map((data, i) => ({
                        label: labels[i],
                        data: data,
                        borderColor: colors[i],
                        backgroundColor: colors[i] + '40',
                        borderWidth: 2,
                        fill: i === 0,
                        tension: 0.1
                    }))
                };
                
                const chartOptions = {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: '#424242'
                            },
                            ticks: {
                                color: '#9e9e9e'
                            }
                        },
                        x: {
                            grid: {
                                color: '#424242'
                            },
                            ticks: {
                                color: '#9e9e9e'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#e0e0e0'
                            }
                        }
                    }
                };
                
                window[canvasId + 'Instance'] = new Chart(ctx, {
                    type: 'line',
                    data: chartData,
                    options: chartOptions
                });
            }
            
            // Первоначальный рендеринг графиков
            renderCharts();
        });
    </script>
</body>
</html>